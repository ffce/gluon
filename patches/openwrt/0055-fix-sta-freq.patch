From: Heiko Wundram <heiko.wundram@freifunk-celle.de>
Date: Mon, Feb 1 14:45:00 CET 2016 +0100
Subject: Fix frequencies for station networks if fixed channel.

diff --git a/package/network/services/hostapd/files/netifd.sh b/package/network/services/hostapd/files/netifd.sh
index 7a4e82b..62f9384 100644
--- a/package/network/services/hostapd/files/netifd.sh
+++ b/package/network/services/hostapd/files/netifd.sh
@@ -495,6 +495,14 @@ wpa_supplicant_add_network() {
 		[ "$_w_driver" = "nl80211" ] ||	wpa_key_mgmt="WPA-NONE"
 	}
 
+	[[ "$_w_mode" = "sta" ]] && {
+		[ -n "$channel" ] && {
+			freq="$(get_freq "$phy" "$channel")"
+			append network_data "scan_freq=$freq" "$N$T"
+			append network_data "freq_list=$freq" "$N$T"
+		}
+	}
+
 	[[ "$_w_mode" = adhoc ]] && append network_data "$_w_modestr" "$N$T"
 
 	case "$auth_type" in
